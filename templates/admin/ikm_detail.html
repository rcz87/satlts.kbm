{% extends "admin/base.html" %}

{% block title %}Detail IKM #{{ response.id }}{% endblock %}

{% block content %}
<div class="card">
    <div style="margin-bottom: 2rem;">
        <a href="{{ url_for('admin.ikm_list') }}" class="btn btn-primary">â€¹ Kembali ke Daftar</a>
    </div>

    <h2 style="margin-bottom: 2rem;">ğŸ“‹ Detail Responden IKM #{{ response.id }}</h2>

    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
            <div>
                <strong>Jenis Layanan:</strong><br>
                {{ response.jenis_layanan or '-' }}
            </div>
            <div>
                <strong>Waktu Submit:</strong><br>
                {{ response.created_at.strftime('%d %B %Y, %H:%M WIB') }}
            </div>
            <div>
                <strong>Skor Total:</strong><br>
                {% set total_score = response.rata_rata * 25 %}
                <span style="font-size: 1.5rem; font-weight: bold; color: #667eea;">{{ "%.2f"|format(total_score) }}</span>
                {% if total_score >= 88.31 %}
                    <span style="color: green; font-weight: bold;"> - A (Sangat Baik)</span>
                {% elif total_score >= 76.61 %}
                    <span style="color: blue; font-weight: bold;"> - B (Baik)</span>
                {% elif total_score >= 65.00 %}
                    <span style="color: orange; font-weight: bold;"> - C (Kurang Baik)</span>
                {% else %}
                    <span style="color: red; font-weight: bold;"> - D (Tidak Baik)</span>
                {% endif %}
            </div>
        </div>
    </div>

    <h3 style="margin-bottom: 1rem;">Nilai Per Kriteria:</h3>
    <table>
        <thead>
            <tr>
                <th>No</th>
                <th>Kriteria</th>
                <th>Nilai</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Persyaratan</td>
                <td><strong>{{ response.persyaratan }}</strong> / 4</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Sistem, Mekanisme, dan Prosedur</td>
                <td><strong>{{ response.prosedur }}</strong> / 4</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Waktu Pelayanan</td>
                <td><strong>{{ response.waktu_pelayanan }}</strong> / 4</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Biaya/Tarif</td>
                <td><strong>{{ response.biaya_tarif }}</strong> / 4</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Produk Spesifikasi Jenis Pelayanan</td>
                <td><strong>{{ response.produk_layanan }}</strong> / 4</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Kompetensi Pelaksana</td>
                <td><strong>{{ response.kompetensi_petugas }}</strong> / 4</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Perilaku Pelaksana</td>
                <td><strong>{{ response.perilaku_petugas }}</strong> / 4</td>
            </tr>
            <tr>
                <td>8</td>
                <td>Sarana dan Prasarana</td>
                <td><strong>{{ response.maklumat_pelayanan }}</strong> / 4</td>
            </tr>
            <tr>
                <td>9</td>
                <td>Penanganan Pengaduan, Saran, dan Masukan</td>
                <td><strong>{{ response.penanganan_pengaduan }}</strong> / 4</td>
            </tr>
        </tbody>
    </table>

    {% if response.komentar %}
    <div style="margin-top: 2rem; background: #fff3cd; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #ffc107;">
        <h3 style="margin-bottom: 1rem;">ğŸ’¬ Komentar:</h3>
        <p style="font-style: italic;">"{{ response.komentar }}"</p>
    </div>
    {% endif %}
</div>
{% endblock %}
